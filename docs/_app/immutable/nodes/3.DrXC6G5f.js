import{s as se,n as ee,d as ge,z as Ce,o as we,r as Ee}from"../chunks/scheduler.CQ8LfOo8.js";import{S as ne,i as ae,e as y,t as A,h as V,c as k,a as O,b as B,d as h,k as D,o as _,f as C,g as I,B as te,s as J,C as re,z as Ne,D as Se,E as le,F as ye,u as Y,v as Q,G as X,w as $,n as Z,l as W,m as Ve,x,I as ke,q as De}from"../chunks/index.C7qbAY9A.js";import{P as ze,_ as Oe}from"../chunks/_page.B9ghhqsy.js";import{I as Pe}from"../chunks/Index.Do5SLOl8.js";import{e as fe,c as Te,l as de,u as ce}from"../chunks/transform.Dpvu3v84.js";async function Me(){return{title:"Admin"}}const Fe=Object.freeze(Object.defineProperty({__proto__:null,load:Me},Symbol.toStringTag,{value:"Module"}));function ve(s){let t,e=s[2][0].text+"",f,c,n,u=s[2][1].text+"",a;return{c(){t=y("span"),f=A(e),c=V(),n=y("span"),a=A(u),this.h()},l(i){t=k(i,"SPAN",{class:!0});var r=O(t);f=B(r,e),r.forEach(h),c=D(i),n=k(i,"SPAN",{class:!0});var l=O(n);a=B(l,u),l.forEach(h),this.h()},h(){_(t,"class","svelte-157h5as"),_(n,"class","svelte-157h5as")},m(i,r){C(i,t,r),I(t,f),C(i,c,r),C(i,n,r),I(n,a)},p(i,r){r&4&&e!==(e=i[2][0].text+"")&&J(f,e),r&4&&u!==(u=i[2][1].text+"")&&J(a,u)},d(i){i&&(h(t),h(c),h(n))}}}function Ue(s){let t,e,f,c,n,u,a,i,r=s[1]==="inner"&&ve(s);return{c(){t=y("div"),e=y("span"),f=A(s[0]),c=V(),n=y("button"),r&&r.c(),this.h()},l(l){t=k(l,"DIV",{class:!0});var d=O(t);e=k(d,"SPAN",{class:!0,id:!0});var g=O(e);f=B(g,s[0]),g.forEach(h),c=D(d),n=k(d,"BUTTON",{role:!0,"aria-checked":!0,"aria-labelledby":!0,class:!0});var E=O(n);r&&r.l(E),E.forEach(h),d.forEach(h),this.h()},h(){_(e,"class","label svelte-157h5as"),_(e,"id",s[4]),_(n,"role","switch"),_(n,"aria-checked",s[3]),_(n,"aria-labelledby",s[4]),_(n,"class","svelte-157h5as"),_(t,"class",u="toggle toggle--"+s[1]+" svelte-157h5as")},m(l,d){C(l,t,d),I(t,e),I(e,f),I(t,c),I(t,n),r&&r.m(n,null),a||(i=te(n,"click",s[5]),a=!0)},p(l,[d]){d&1&&J(f,l[0]),l[1]==="inner"?r?r.p(l,d):(r=ve(l),r.c(),r.m(n,null)):r&&(r.d(1),r=null),d&8&&_(n,"aria-checked",l[3]),d&2&&u!==(u="toggle toggle--"+l[1]+" svelte-157h5as")&&_(t,"class",u)},i:ee,o:ee,d(l){l&&h(t),r&&r.d(),a=!1,i()}}}function Ae(s,t,e){let f,{label:c}=t,{style:n="inner"}=t,{options:u=["on","off"]}=t,{value:a}=t;const i=`toggle-${Math.floor(Math.random()*1e6)}`,r=l=>{const g=l.target.getAttribute("aria-checked");e(3,f=g!=="true"),e(6,a=f?u[0].value:u[1].value)};return s.$$set=l=>{"label"in l&&e(0,c=l.label),"style"in l&&e(1,n=l.style),"options"in l&&e(2,u=l.options),"value"in l&&e(6,a=l.value)},s.$$.update=()=>{s.$$.dirty&68&&e(3,f=a===u[0].value)},[c,n,u,f,i,r,a]}class Be extends ne{constructor(t){super(),ae(this,t,Ae,Ue,se,{label:0,style:1,options:2,value:6})}}function he(s,t,e){const f=s.slice();return f[12]=t[e],f}function _e(s){let t,e;return{c(){t=y("div"),e=A(s[1]),this.h()},l(f){t=k(f,"DIV",{class:!0,id:!0});var c=O(t);e=B(c,s[1]),c.forEach(h),this.h()},h(){_(t,"class","legend svelte-13oh5yk"),_(t,"id","legend-"+s[6])},m(f,c){C(f,t,c),I(t,e)},p(f,c){c&2&&J(e,f[1])},d(f){f&&h(t)}}}function be(s){let t,e,f,c,n=!1,u,a,i=(s[12].label||s[12].value)+"",r,l,d,g,E,m,v;return E=Se(s[10][0]),{c(){t=y("div"),e=y("input"),u=V(),a=y("label"),r=A(i),g=V(),this.h()},l(p){t=k(p,"DIV",{class:!0});var w=O(t);e=k(w,"INPUT",{type:!0,id:!0,name:!0,class:!0}),u=D(w),a=k(w,"LABEL",{class:!0,for:!0});var T=O(a);r=B(T,i),T.forEach(h),g=D(w),w.forEach(h),this.h()},h(){_(e,"type","radio"),_(e,"id",f=`${s[6]}-${s[12].slug}`),_(e,"name","name-"+s[6]),_(e,"class","sr-only svelte-13oh5yk"),e.__value=c=s[12].value,le(e,e.__value),e.disabled=s[3],_(a,"class",l="option "+s[2]+" svelte-13oh5yk"),_(a,"for",d=`${s[6]}-${s[12].slug}`),_(t,"class","option svelte-13oh5yk"),E.p(e)},m(p,w){C(p,t,w),I(t,e),e.checked=e.__value===s[0],I(t,u),I(t,a),I(a,r),I(t,g),m||(v=te(e,"change",s[9]),m=!0)},p(p,w){w&32&&f!==(f=`${p[6]}-${p[12].slug}`)&&_(e,"id",f),w&32&&c!==(c=p[12].value)&&(e.__value=c,le(e,e.__value),n=!0),w&8&&(e.disabled=p[3]),(n||w&33)&&(e.checked=e.__value===p[0]),w&32&&i!==(i=(p[12].label||p[12].value)+"")&&J(r,i),w&4&&l!==(l="option "+p[2]+" svelte-13oh5yk")&&_(a,"class",l),w&32&&d!==(d=`${p[6]}-${p[12].slug}`)&&_(a,"for",d)},d(p){p&&h(t),E.r(),m=!1,v()}}}function je(s){let t,e,f,c,n=s[1]&&_e(s),u=fe(s[5]),a=[];for(let i=0;i<u.length;i+=1)a[i]=be(he(s,u,i));return{c(){t=y("div"),e=y("div"),n&&n.c(),f=V(),c=y("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){t=k(i,"DIV",{class:!0});var r=O(t);e=k(r,"DIV",{id:!0,class:!0,role:!0,"aria-labelledby":!0});var l=O(e);n&&n.l(l),f=D(l),c=k(l,"DIV",{class:!0});var d=O(c);for(let g=0;g<a.length;g+=1)a[g].l(d);d.forEach(h),l.forEach(h),r.forEach(h),this.h()},h(){_(c,"class","options svelte-13oh5yk"),_(e,"id",`group-${s[6]}`),_(e,"class","group svelte-13oh5yk"),_(e,"role","radiogroup"),_(e,"aria-labelledby",`label-${s[6]}`),re(e,"is-top",s[4]),_(t,"class","button-set svelte-13oh5yk")},m(i,r){C(i,t,r),I(t,e),n&&n.m(e,null),I(e,f),I(e,c);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(c,null)},p(i,[r]){if(i[1]?n?n.p(i,r):(n=_e(i),n.c(),n.m(e,f)):n&&(n.d(1),n=null),r&109){u=fe(i[5]);let l;for(l=0;l<u.length;l+=1){const d=he(i,u,l);a[l]?a[l].p(d,r):(a[l]=be(d),a[l].c(),a[l].m(c,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=u.length}r&16&&re(e,"is-top",i[4])},i:ee,o:ee,d(i){i&&h(t),n&&n.d(),Ne(a,i)}}}function Re(s,t,e){let f,c,{options:n=[]}=t,{legend:u=""}=t,{legendPosition:a="top"}=t,{labelClass:i=""}=t,{disabled:r=!1}=t,{value:l}=t;const d=`legend-${Math.floor(Math.random()*1e6)}`,g=(v="")=>`${v}`.toLowerCase().replace(/\W/g,""),E=[[]];function m(){l=this.__value,e(0,l)}return s.$$set=v=>{"options"in v&&e(7,n=v.options),"legend"in v&&e(1,u=v.legend),"legendPosition"in v&&e(8,a=v.legendPosition),"labelClass"in v&&e(2,i=v.labelClass),"disabled"in v&&e(3,r=v.disabled),"value"in v&&e(0,l=v.value)},s.$$.update=()=>{s.$$.dirty&128&&e(5,f=n.map(v=>({...v,val:v.value,slug:g(v.value)}))),s.$$.dirty&256&&e(4,c=a==="top")},[l,u,i,r,c,f,d,n,a,m,E]}class Ze extends ne{constructor(t){super(),ae(this,t,Re,je,se,{options:7,legend:1,legendPosition:8,labelClass:2,disabled:3,value:0})}}function me(s){let t,e,f;function c(u){s[9](u)}let n={label:"Show results in demo",style:"inner",options:s[6]};return s[1]!==void 0&&(n.value=s[1]),t=new Be({props:n}),ge.push(()=>ye(t,"value",c)),{c(){Y(t.$$.fragment)},l(u){Q(t.$$.fragment,u)},m(u,a){$(t,u,a),f=!0},p(u,a){const i={};!e&&a&2&&(e=!0,i.value=u[1],Ce(()=>e=!1)),t.$set(i)},i(u){f||(Z(t.$$.fragment,u),f=!0)},o(u){W(t.$$.fragment,u),f=!1},d(u){x(t,u)}}}function pe(s){let t,e,f="Simulation with N people",c,n,u,a,i="Run",r,l,d="Reset simulations",g,E;return{c(){t=y("div"),e=y("div"),e.textContent=f,c=V(),n=y("input"),u=V(),a=y("button"),a.textContent=i,r=V(),l=y("button"),l.textContent=d,this.h()},l(m){t=k(m,"DIV",{class:!0});var v=O(t);e=k(v,"DIV",{"data-svelte-h":!0}),X(e)!=="svelte-cpobey"&&(e.textContent=f),c=D(v),n=k(v,"INPUT",{type:!0,placeholder:!0,class:!0}),u=D(v),a=k(v,"BUTTON",{"data-svelte-h":!0}),X(a)!=="svelte-1aeyk9t"&&(a.textContent=i),v.forEach(h),r=D(m),l=k(m,"BUTTON",{"data-svelte-h":!0}),X(l)!=="svelte-9b0f6r"&&(l.textContent=d),this.h()},h(){_(n,"type","number"),_(n,"placeholder","N"),_(n,"class","svelte-125l84z"),_(t,"class","input svelte-125l84z")},m(m,v){C(m,t,v),I(t,e),I(t,c),I(t,n),le(n,s[2]),I(t,u),I(t,a),C(m,r,v),C(m,l,v),g||(E=[te(n,"input",s[10]),te(a,"click",s[7])],g=!0)},p(m,v){v&4&&ke(n.value)!==m[2]&&le(n,m[2])},d(m){m&&(h(t),h(r),h(l)),g=!1,Ee(E)}}}function Je(s){let t,e,f=s[3]?"Connected âœ…":"Not connected ðŸš«",c,n,u,a,i=s[4]?"Connected âœ…":"Not connected ðŸš«",r,l,d,g,E,m,v,p,w,T,F="On people's phones",G,M,U,S,P,q="On the big screen",K,j,R,H;function Ie(o){s[8](o)}let ie={legend:"Set View",options:s[5]};s[0]!==void 0&&(ie.value=s[0]),d=new Ze({props:ie}),ge.push(()=>ye(d,"value",Ie));let N=(s[0]==="guesses"||s[0]==="birthdays")&&me(s),z=s[0]==="simulation"&&pe(s);return U=new Pe({}),R=new ze({}),{c(){t=y("div"),e=A("User Channel: "),c=A(f),n=V(),u=y("div"),a=A("Demo Channel: "),r=A(i),l=V(),Y(d.$$.fragment),E=V(),N&&N.c(),m=V(),z&&z.c(),v=V(),p=y("hr"),w=V(),T=y("h3"),T.textContent=F,G=V(),M=y("div"),Y(U.$$.fragment),S=V(),P=y("h3"),P.textContent=q,K=V(),j=y("div"),Y(R.$$.fragment),this.h()},l(o){t=k(o,"DIV",{});var b=O(t);e=B(b,"User Channel: "),c=B(b,f),b.forEach(h),n=D(o),u=k(o,"DIV",{});var L=O(u);a=B(L,"Demo Channel: "),r=B(L,i),L.forEach(h),l=D(o),Q(d.$$.fragment,o),E=D(o),N&&N.l(o),m=D(o),z&&z.l(o),v=D(o),p=k(o,"HR",{class:!0}),w=D(o),T=k(o,"H3",{"data-svelte-h":!0}),X(T)!=="svelte-1ki2yun"&&(T.textContent=F),G=D(o),M=k(o,"DIV",{class:!0});var oe=O(M);Q(U.$$.fragment,oe),oe.forEach(h),S=D(o),P=k(o,"H3",{"data-svelte-h":!0}),X(P)!=="svelte-15xdyy6"&&(P.textContent=q),K=D(o),j=k(o,"DIV",{class:!0});var ue=O(j);Q(R.$$.fragment,ue),ue.forEach(h),this.h()},h(){_(p,"class","svelte-125l84z"),_(M,"class","box svelte-125l84z"),_(j,"class","box svelte-125l84z")},m(o,b){C(o,t,b),I(t,e),I(t,c),C(o,n,b),C(o,u,b),I(u,a),I(u,r),C(o,l,b),$(d,o,b),C(o,E,b),N&&N.m(o,b),C(o,m,b),z&&z.m(o,b),C(o,v,b),C(o,p,b),C(o,w,b),C(o,T,b),C(o,G,b),C(o,M,b),$(U,M,null),C(o,S,b),C(o,P,b),C(o,K,b),C(o,j,b),$(R,j,null),H=!0},p(o,[b]){(!H||b&8)&&f!==(f=o[3]?"Connected âœ…":"Not connected ðŸš«")&&J(c,f),(!H||b&16)&&i!==(i=o[4]?"Connected âœ…":"Not connected ðŸš«")&&J(r,i);const L={};!g&&b&1&&(g=!0,L.value=o[0],Ce(()=>g=!1)),d.$set(L),o[0]==="guesses"||o[0]==="birthdays"?N?(N.p(o,b),b&1&&Z(N,1)):(N=me(o),N.c(),Z(N,1),N.m(m.parentNode,m)):N&&(De(),W(N,1,1,()=>{N=null}),Ve()),o[0]==="simulation"?z?z.p(o,b):(z=pe(o),z.c(),z.m(v.parentNode,v)):z&&(z.d(1),z=null)},i(o){H||(Z(d.$$.fragment,o),Z(N),Z(U.$$.fragment,o),Z(R.$$.fragment,o),H=!0)},o(o){W(d.$$.fragment,o),W(N),W(U.$$.fragment,o),W(R.$$.fragment,o),H=!1},d(o){o&&(h(t),h(n),h(u),h(l),h(E),h(m),h(v),h(p),h(w),h(T),h(G),h(M),h(S),h(P),h(K),h(j)),x(d,o),N&&N.d(o),z&&z.d(o),x(U),x(R)}}}function Ge(s,t,e){const n=Te("https://vhfmlgdqisxickovdgzl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZoZm1sZ2RxaXN4aWNrb3ZkZ3psIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjEzNDMzMjgsImV4cCI6MjAzNjkxOTMyOH0.mV287-z8TjqVs12uIti3iOwnnbGOiPstj7xfPWmi-2A");let u,a,i,r,l,d,g=!1,E=!1;const m=[{label:"Gather votes",value:"guesses"},{label:"Gather birthdays",value:"birthdays"},{label:"Simulations",value:"simulation"}],v=[{value:!0,text:"on"},{value:!1,text:"off"}],p=({channel:S,event:P,payload:q})=>{if(S===l&&!g||S===d&&!E)return null;S.send({type:"broadcast",event:P,payload:q})},w=async()=>{!l||!d||(p({channel:l,event:"view",payload:u}),p({channel:d,event:"view",payload:u}),e(1,a=!1),await ce({table:"state",column:"view",value:u,id:1}))},T=async()=>{d&&(p({channel:d,event:"show-results",payload:a}),await ce({table:"state",column:"show_results",value:a,id:1}))},F=()=>{if(!d)return;const S=Oe.sampleSize(r,i);p({channel:d,event:"simulation-n",payload:{n:i,birthdays:S}})};we(async()=>{l=n.channel("user"),d=n.channel("demo"),[l,d].forEach(P=>{P.subscribe(q=>{if(q!=="SUBSCRIBED")return null;P===l&&e(3,g=!0),P===d&&e(4,E=!0)})}),r=await de({table:"birthdays"});const S=await de({table:"state"});e(0,u=S[0].view),e(1,a=S[0].show_results)});function G(S){u=S,e(0,u)}function M(S){a=S,e(1,a)}function U(){i=ke(this.value),e(2,i)}return s.$$.update=()=>{s.$$.dirty&1&&w(),s.$$.dirty&2&&T()},[u,a,i,g,E,m,v,F,G,M,U]}class Ke extends ne{constructor(t){super(),ae(this,t,Ge,Je,se,{})}}export{Ke as component,Fe as universal};
